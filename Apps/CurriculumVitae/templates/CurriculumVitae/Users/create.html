<!-- Style the bar as you like -->

<div class="flex  justify-center items-center w-full h-screen bg-slate-50">
    <form action="" class="p-5 pt-36 md:p-0">
        {% csrf_token %}
        {% for user in formPersonalData %}
        <div class="splide  bg-white px-5 py-10 rounded-md max-w-md overflow-hidden ">
            <div class="z-0  my-slider-progress -translate-y-4 md:-translate-y-7 ">
                <div class="my-slider-progress-bar p-1"></div>
            </div>

            <div class="splide__track p-5 z-50">
                <ul class="splide__list w-full ">
                    <!-- form 1 -->
                    <li class="form splide__slide space-y-5 text-xs px-2">
                        {% include 'CurriculumVitae/components/createForms/form1.html' %}
                    </li>
                    <!-- form 2 -->
                    <li class="form splide__slide space-y-5 text-xs px-2">
                        {% include 'CurriculumVitae/components/createForms/form2.html' %}
                    </li>
                    <!-- form 3 -->
                    <li class="form splide__slide space-y-5 text-xs px-2">
                        {% include 'CurriculumVitae/components/createForms/form3.html' %}
                    </li>
                    <!-- form 4 -->
                    <li id="form last-form" class="splide__slide space-y-5 text-xs px-2">
                        {% include 'CurriculumVitae/components/createForms/form4.html' %}
                    </li>

                </ul>
            </div>


            <!-- button next and back -->
            <div class="flex justify-between text-xs w-full pt-5 md:pt-14 splide__arrows">
                <button id="back" type="button"
                    class="flex  splide__arrow--prev justify-center items-center px-4 py-2 border rounded-md border-slate-300">
                    <span class="material-symbols-outlined">
                        navigate_before
                    </span>
                    <span>
                        Back
                    </span>
                </button>
                <button id="" onclick="nextData()" type="button" 
                    class="flex  justify-center items-center px-4 py-2 border rounded-md border-slate-300" >
                    <span>
                        Next
                    </span>
                    <span class="material-symbols-outlined">
                        navigate_next
                    </span>
                </button>

                <button id="btnHidden" type="button" 
                    class=" splide__arrow--next hidden" disabled>
                </button>
            </div>
            <!-- <button type="submit" class="justify-center items-center px-4 py-2 border rounded-md border-slate-300">CREATECV</button> -->

            <!-- Add the progress bar element -->
        

        </div>

        {% endfor %}
    </form>
</div>

<script>


</script>
<script>

    var splide = new Splide('.splide', {
        pagination: 0,
        drag: false,

    });
    var bar  = splide.root.querySelector( '.my-slider-progress-bar' );
    
    // Updates the bar width whenever the carousel moves:
    splide.on( 'mounted move', function () {
        var end  = splide.Components.Controller.getEnd() + 1;
        var rate = Math.min( ( splide.index + 1 ) / end, 1 );
        bar.style.width = String( 100 * rate ) + '%';
    } );
    function cekForm() {
        const LastForm = document.querySelector( '#last-form' );
        if (LastForm.classList.contains('is-active')){
            console.log('halaman akhir')
        }
    }
    splide.mount();

    // const slide = document.getElementById('splide01-slide01')
    // const NextButon = document.getElementById('next')
    // const input = slide.querySelector('input')
    
    
    // input.addEventListener( 'input', function() {
    //     if(input.value === ""){
    //         NextButon.disabled = true;
    //     }else{
    //         NextButon.disabled = false;

    //     }
    // })
    function nextData(){
        // const isActive = document.querySelector('.is-active')
        const NextButon = document.getElementById('next')
        const btnHidden = document.getElementById('btnHidden')
        // let next = true
        btnHidden.disabled = false
        const inputs = document.querySelectorAll('.is-active.is-visible input[required]' )
        console.log(inputs)
        inputs.forEach(function(input){
            if(input.value !== ""){
                btnHidden.click()
            }else{
                btnHidden.disabled = true
            }
        })
        

    }
    
    nextData()
//     const NextButon = document.getElementById('next')
//     // const BackButon = document.getElementById('back')
//     // NextButon.disabled = true;
//     document.querySelectorAll('.splide__slide').forEach(function(mySlide) {
//     const inputs = mySlide.querySelectorAll('input[type="text"][required]');
//     inputs.forEach(function(input) {
//       input.addEventListener('keyup', function() {
//         let allInputsFilled = true;
//         inputs.forEach(function(input) {
//           if (input.value.trim() === '') {
//             allInputsFilled = false;
//           }
//         });
//         if (allInputsFilled) {
//             NextButon.disabled = false;
//         } else {
//             NextButon.disabled = true;
//         }
//       });
//     });
//   });


//     document.querySelectorAll('splide__slide').forEach(function(mySlide) {
//         const inputs = mySlide.querySelectorAll('input[type="text"]');
//         inputs.forEach(function(input) {
//         input.addEventListener('keyup', function() {
//             let atLeastOneInputFilled = false;
//             inputs.forEach(function(input) {
//             if (input.value.trim() !== '') {
//                 atLeastOneInputFilled = true;
//             }
//             });
//             if (atLeastOneInputFilled) {
//             NextButon.style.display = 'flex';
//             } else {
//             NextButon.style.display = 'none';
//             }
//         });
//         });
//   });

    




</script>